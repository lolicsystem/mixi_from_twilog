This is a greasemonkey script to gather one day's twitter by the web
service named "twilog", and to insert it in the mixi diary.


【これは何か】
    これは、twitter での1日分の発言を、twilog ( http://twilog.org/ )
    を用いて収集し、それを mixi の日記編集画面に挿入するための、
    Greasemonkey スクリプトです。

    mixiユーザーで、ご自分の日記に「1日分の」twitterでのつぶやきを書き
    込みたいときなどに便利です。

    twitter のユーザーであれば、twilog へのユーザー登録をしていなくても、
    本スクリプトを利用可能です（但し、若干の制限があります）。


【使用にあたっての前提条件】
    (1) Greasemonkey スクリプトを扱える Firefox もしくはそれに類するブ
        ラウザを使用していること（当たり前ですね）、

    (2) twitter でのつぶやきを公開している（「鍵」をかけていない）こと、

    を、前提としている Greasemonkey スクリプトです。
    特に twilog へのユーザー登録を行っておく必要はありませんが、未登録ユー
    ザーの場合、捕捉されるつぶやきが最新のものから200件に限定されますの
    で、たくさんつぶやかれる方は、過去数日分のつぶやきしか本スクリプトで
    は取り込めないことになります。

    ぜひ、twilog への登録をオススメします（すごく便利ですし…）。


【インストールすると】
    本スクリプトを、Firefox の Greasemonkey にインストールすると、mixi
    の「日記を書く」ページに、twitter を示す「ｔ」ボタンが現れます。

    その右横の入力フォームに（あなたの）twitterのユーザー名を入力して
    下さい。一度入力すると、本スクリプトはそのユーザー名を保存しますの
    で、次回使用時以降は入力する必要はありません。

    そのさらに右横の入力フォームには「昨日の日付」を表す6桁の数字が入
    力されています。

    その状態で「ｔ」ボタンをクリックすると、指定したユーザの、指定した
    日、１日分のつぶやきを「ついろぐ ( http://twilog.org/ )」から取得し、
    その内容を日記の編集画面に挿入します。

    Twilog自体がつぶやきを記録するタイミングは不定で、最長12時間の間隔が
    開きますが、本スクリプトは直前に投稿されたつぶやきも洩れなく反映する
    仕様となっています（強制的に更新させています）。

    以下の場合には、ダイアログボックスを出して、情報表示します。

        ・ Twilogの強制更新に失敗した場合
        ・ なんらかの理由でTwilogと通信できなかった場合
        ・ 有効でない twitter ネームを指定した場合
        ・ 鍵付き（非公開）の twitter ネームを指定した場合
        ・ 指定した日のつぶやきが無かった場合


【カスタマイズ】
    「ｔ」ボタンの上にマウスカーソルを３秒間置くと（その間、クリックはし
    ないで下さい）、本スクリプトの設定画面が現れます。

    ●つぶやきを現在の日記に…
        ・ 上書きする (デフォルト)
        ・ 追記する
      を選択して下さい。

    ●返信やReTweetを含むつぶやきの表示は…
        ・ 返信(先頭が@のつぶやき)もRT(文中に@がある記事)も表示
        ・ 返信は非表示、RTは表示
        ・ 返信もRTも非表示 (デフォルト)
      を選択して下さい。

      また、返信やRTの @username ですが、mixiプレミアムに加入している場
      合は、@username のtwitterホームページへのリンクとして表示されます。
      mixiプレミアムに非加入の場合は、単なるテキスト表示となります。

    ●つぶやきの整形テンプレート
        ここには、つぶやきひとつひとつを、mixi日記上でどう表示するかを指
        定して下さい。テンプレート中には、以下の予約語が使用可能です。

        %tweet% … つぶやき本文に置き換わります。
        %time%  … つぶやいた時刻に置き換わります
        %href%  … twitter上でのつぶやきそのものへのリンクURLに置き換わ
                   ります。

        テンプレートのデフォルトは、以下の様になっています。

-----ここから
%time%
%tweet%

-----ここまで

        時刻とつぶやきの内容を表示するだけのシンプルなものです。mixiプレ
        ミアムに加入されている場合は、様々なHTMLタグが使えますので、例え
        ば以下の様なテンプレートにすると、少し表示が華やかになります。

-----ここから
<blockquote>%tweet%
<a href="%href%" target="_blank"><span class="small">%time%</span></a></blockquote>
-----ここまで


【おわりに】

本スクリプトの詳細は、はてなダイアリーに記載する予定です。

Sun Nov 15 07:06:41 JST 2009
lolicsystem / Chiemimaru Kai

http://d.hatena.ne.jp/lolicsystem
email:lolicsystem@gmail.com
